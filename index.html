<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>PasteClone Pro</title>
  <link href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism-tomorrow.css" rel="stylesheet"/>
  <style>
    body {
      margin:0; font-family: 'Segoe UI', sans-serif;
      background:#0f172a; color:#e2e8f0;
      display:flex; flex-direction:column; align-items:center;
      min-height:100vh; padding:20px;
    }
    h1 { color:#38bdf8; }
    .container {
      width:90%; max-width:900px;
      background:#1e293b; padding:20px;
      border-radius:16px; box-shadow:0 4px 20px rgba(0,0,0,0.5);
    }
    textarea {
      width:100%; height:200px;
      background:#0f172a; color:#e2e8f0;
      border:none; border-radius:12px;
      padding:12px; font-family:monospace; font-size:15px;
      resize: vertical;
    }
    button {
      margin-top:12px; padding:12px 24px;
      border:none; border-radius:12px;
      background:#38bdf8; color:#0f172a;
      font-weight:bold; cursor:pointer;
      transition:0.2s;
    }
    button:hover { background:#0ea5e9; }
    .links {
      margin-top:15px; font-size:14px;
      color:#94a3b8;
    }
    .links a { color:#38bdf8; text-decoration:none; margin-right:10px; }
    .toast {
      position: fixed; bottom:20px; right:20px;
      background:#38bdf8; color:#0f172a;
      padding:10px 16px; border-radius:10px;
      opacity:0; transition:opacity 0.3s ease;
    }
    .toast.show { opacity:1; }
    pre {
      max-height:500px; overflow:auto;
      background:#0f172a !important;
      border-radius:12px;
      padding:16px !important;
    }
  </style>
</head>
<body>
  <h1>üìã PasteClone Pro</h1>
  <div class="container">
    <textarea id="paste" placeholder="Nh·∫≠p n·ªôi dung..."></textarea><br>
    <button onclick="savePaste()">üíæ L∆∞u Paste</button>
    <div id="info" class="links"></div>
    <h3>N·ªôi dung:</h3>
    <pre><code id="result" class="language-javascript"></code></pre>
  </div>

  <div id="toast" class="toast">ƒê√£ copy Raw link üìã</div>

  <script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-javascript.min.js"></script>
  <script>
    function savePaste() {
      const text = document.getElementById("paste").value.trim();
      if (!text) return alert("Vui l√≤ng nh·∫≠p n·ªôi dung!");
      const id = Date.now().toString(36);
      localStorage.setItem("paste_" + id, text);

      const base = window.location.origin + window.location.pathname;
      const viewLink = base + "#" + id;
      const rawLink = base + "#" + id + "&raw=1";

      document.getElementById("info").innerHTML =
        `üîó <a href='${viewLink}' target='_blank'>Xem Paste</a> 
         | <a href='${rawLink}' target='_blank'>Raw</a>`;

      document.getElementById("result").textContent = text;
      Prism.highlightAll();

      // Copy raw link t·ª± ƒë·ªông
      navigator.clipboard.writeText(rawLink);
      showToast();
    }

    function loadPaste() {
      const hash = window.location.hash.substring(1);
      if (!hash) return;

      const [id, raw] = hash.split("&");
      const text = localStorage.getItem("paste_" + id);
      if (!text) {
        document.getElementById("result").textContent = "‚ùå Paste kh√¥ng t·ªìn t·∫°i!";
        return;
      }

      if (raw === "raw=1") {
        document.body.innerHTML = "<pre style='white-space:pre-wrap;max-height:none;'>"+
          text.replace(/[<>&]/g, m=>({"<":"&lt;",">":"&gt;","&":"&amp;"}[m]))+"</pre>";
      } else {
        document.getElementById("result").textContent = text;
        Prism.highlightAll();
      }
    }

    function showToast() {
      const t = document.getElementById("toast");
      t.classList.add("show");
      setTimeout(()=>t.classList.remove("show"),2000);
    }

    loadPaste();
  </script>
</body>
</html>
